class Solution {
    int[][] dir={{1,0},{0,1},{0,-1},{-1,0},{1,1},{-1,-1},{1,-1},{-1,1}};
    public int shortestPathBinaryMatrix(int[][] grid) {
        int len=grid.length;
        if(grid[0][0]==1 || grid[len-1][len-1]==1) return -1;
        Queue<int[]> q=new ArrayDeque<>();
        q.add(new int[]{0,0,1});
        grid[0][0]=1;
        while(!q.isEmpty()){
            int[] temp=q.poll();
            int i=temp[0];
            int j=temp[1];
            int dis=temp[2];
            if(i==len-1 && j==len-1) return dis;
            for(int[] d:dir){
                int newRow=i+d[0];
                int newCol=j+d[1];
                if(isValid(newRow,newCol,len,len) && grid[newRow][newCol]==0){
                   q.add(new int[]{newRow,newCol,dis+1});
                   grid[newRow][newCol]=1;
                }
            }
        } 
        return -1;
    }
    public boolean isValid(int i,int j,int m,int n){
        if(i<0 || j<0 || j>=n || i>=m) return false;
        return true;
    }
}
